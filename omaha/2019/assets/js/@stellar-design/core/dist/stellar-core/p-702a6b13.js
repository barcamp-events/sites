const t=(t,s)=>Math.abs(t-s),s=(s,a,e)=>{const r=t(s,a)*e;return s>a?s-r:s+r},a=t=>Array.from(t.querySelectorAll(".line")).map(t=>{const s=parseInt(t.dataset.end,10),a=parseInt(t.dataset.start,10),e=parseFloat(t.dataset.opacityStart),r=parseFloat(t.dataset.opacityEnd),n=parseInt(t.dataset.translatexStart,10),o=parseInt(t.dataset.translatexEnd,10),i=parseInt(t.dataset.translateyStart,10),d=parseInt(t.dataset.translateyEnd,10),f=parseFloat(t.dataset.scaleStart),p=parseFloat(t.dataset.scaleEnd),N={};return isNaN(e)||isNaN(r)||(N.opacity={end:r,start:e}),isNaN(n)||isNaN(o)||(N.translateX={end:o,start:n}),isNaN(i)||isNaN(d)||(N.translateY={end:d,start:i}),isNaN(f)||isNaN(p)||(N.scale={end:p,start:f}),void 0===s||void 0===a||0===Object.keys(N).length?null:{el:t,end:s,offset:0,start:a,updates:N}}).filter(t=>t),e=(a,e,r)=>{const n=(()=>{const t=document.createElement("div"),s=["Webkit","webkit","Moz","moz","ms","o"];if(null!=t.style.transform)return"transform";for(let a in s){const e=`${s[a]}Transform`;if(void 0!==t.style[e])return e}})(),o=r;a.map(({el:a,end:r,offset:i,start:d,updates:f})=>{const p=i+d,N=i+r,c=e.get(a);if(o>=p&&o<=N||"before"!==c&&o<p||"after"!==c&&o>N){let r=0,i=0,d=1;const c=((s,a,e)=>t(s,e)/t(s,a))(p,N,((t,s,a)=>Math.max(Math.min(a,s),t))(p,N,o));if(f.opacity){const{end:t,start:e}=f.opacity,r=s(e,t,c).toFixed(2);a.style.opacity=r}if(f.translateX){const{end:t,start:a}=f.translateX;r=parseInt(s(a,t,c),10)}if(f.translateY){const{end:t,start:a}=f.translateY;i=parseInt(s(a,t,c),10)}if(f.scale){const{end:t,start:a}=f.scale;d=s(a,t,c).toFixed(2)}a.style[n]=`translate3d(${r}px, ${i}px, 0) scale(${d})`,e.set(a,o<p?"before":o>N?"after":"during")}})};export{a as g,e as u};