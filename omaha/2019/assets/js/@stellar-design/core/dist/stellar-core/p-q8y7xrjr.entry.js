import{r as t,e as s,h as e,g as i,H as r}from"./p-8388b2f5.js";import"./p-20de5b5b.js";import{T as h}from"./p-3ddd0228.js";import"./p-c428ff15.js";import{a as o,g as a,c as l}from"./p-5d42c00f.js";import"./p-c93f133f.js";import"./p-22e0cac7.js";import"./p-3a3a4911.js";const m=class{constructor(e){t(this,e),this.ajax=!1,this.method="get",this.autocomplete="on",this.enctype="multipart/form-data",this.novalidate=!1,this.selectors=["stellar-input","stellar-toggle","stellar-range","stellar-switch","stellar-select"],this.submitted=s(this,"submitted",7)}handleEnter(t){"enter"===t.key&&this.submit_form()}async register(t){this.selectors=[...this.selectors,...t]}async refresh(){var t=window.document.createEvent("UIEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}async state(){var t=new FormData,s=[],e=!0;const i=Array.from(this.element.querySelectorAll(this.selectors.join(",")));return await o(i,async t=>{try{let e=await t.validate();s.push(e)}catch(e){s.push({name:`${t.name}`,value:void 0,valid:!1,errors:[e.message]})}}),s.forEach(s=>{s&&(s.name&&t.append(s.name.toString(),s.value),s.valid||(e=!1))}),{els:i,json:a(s.filter(t=>t&&t.name)),results:s,formData:t,valid:e}}async submit_form(){const t=await this.state();t.valid&&(this.ajax?this.submitted.emit(t):this.element.querySelector("form").submit())}render(){return e("form",{action:this.action,method:this.method,"accept-charset":this.acceptCharset,autocomplete:this.autocomplete,enctype:this.enctype,name:this.name,novalidate:this.novalidate,target:this.target,onSubmit:t=>{t.preventDefault(),this.submit_form()}},e("slot",null))}get element(){return i(this)}static get style(){return"stellar-form{display:block}"}},n=class{constructor(s){t(this,s),this.dark=!1,this.light=!1,this.body=!1,this.system=!1,this.base="indigo",this.complement="red",this.htmlEl=document.querySelector("html"),this.bodyEl=document.querySelector("body")}componentWillLoad(){this.system&&(this.dark=window.matchMedia("(prefers-color-scheme: dark)").matches,this.light=window.matchMedia("(prefers-color-scheme: light)").matches),this.observeDark(),this.observeColors()}observeColors(){const t=Object.keys(l);this.body&&(t.forEach(t=>{this.htmlEl.classList.remove(`theme-${t}`),this.htmlEl.classList.remove(`complement-${t}`),this.bodyEl.classList.remove(`theme-${t}`),this.bodyEl.classList.remove(`complement-${t}`)}),this.bodyEl.classList.add(`theme-${this.base}`),this.bodyEl.classList.add(`complement-${this.complement}`))}observeDark(){this.body&&this.dark?(this.htmlEl.classList.add("dark-mode"),this.bodyEl.classList.add("dark-mode")):(this.htmlEl.classList.remove("dark-mode"),this.bodyEl.classList.remove("dark-mode")),this.body&&this.light?(this.htmlEl.classList.add("light-mode"),this.bodyEl.classList.add("light-mode")):(this.htmlEl.classList.remove("light-mode"),this.bodyEl.classList.remove("light-mode"))}render(){return e(r,{class:`${this.dark?"dark-mode":""} ${this.light?"light-mode":""} theme-${this.base} complement-${this.complement}`},e(h.Provider,{state:{dark:this.dark,light:this.light}},e("slot",null)))}static get watchers(){return{base:["observeColors"],complement:["observeColors"],dark:["observeDark"]}}};export{m as stellar_form,n as stellar_theme};