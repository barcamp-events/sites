import{r as t,e as s,h as e,g as r}from"./p-8388b2f5.js";import{e as a,g as i}from"./p-3586bef7.js";import"./p-c428ff15.js";import"./p-c93f133f.js";import"./p-22e0cac7.js";import"./p-3a3a4911.js";const o=class{constructor(e){t(this,e),this.ajax=!1,this.method="get",this.autocomplete="on",this.enctype="multipart/form-data",this.novalidate=!1,this.selectors=["stellar-input","stellar-toggle","stellar-range","stellar-switch","stellar-select"],this.submitted=s(this,"submitted",7)}handleEnter(t){"enter"===t.key&&this.submit_form()}async register(t){this.selectors=[...this.selectors,...t]}async refresh(){var t=window.document.createEvent("UIEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}async state(){var t=new FormData,s=[],e=!0;const r=Array.from(this.element.querySelectorAll(this.selectors.join(",")));return await a(r,async t=>{try{let e=await t.validate();s.push(e)}catch(e){s.push({name:`${t.name}`,value:void 0,valid:!1,errors:[e.message]})}}),s.forEach(s=>{s&&(s.name&&t.append(s.name.toString(),s.value),s.valid||(e=!1))}),{els:r,json:i(s.filter(t=>t&&t.name)),results:s,formData:t,valid:e}}async submit_form(){const t=await this.state();t.valid&&(this.ajax?this.submitted.emit(t):this.element.querySelector("form").submit())}render(){return e("form",{action:this.action,method:this.method,"accept-charset":this.acceptCharset,autocomplete:this.autocomplete,enctype:this.enctype,name:this.name,novalidate:this.novalidate,target:this.target,onSubmit:t=>{t.preventDefault(),this.submit_form()}},e("slot",null))}get element(){return r(this)}static get style(){return"stellar-form{display:block}"}};export{o as stellar_form};