var __awaiter=this&&this.__awaiter||function(n,e,t,r){function i(n){return n instanceof t?n:new t((function(e){e(n)}))}return new(t||(t=Promise))((function(t,o){function u(n){try{s(r.next(n))}catch(n){o(n)}}function a(n){try{s(r["throw"](n))}catch(n){o(n)}}function s(n){n.done?t(n.value):i(n.value).then(u,a)}s((r=r.apply(n,e||[])).next())}))};var __generator=this&&this.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(n){return function(e){return s([n,e])}}function s(u){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,i&&(o=u[0]&2?i["return"]:u[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;if(i=0,o)u=[u[0]&2,o.value];switch(u[0]){case 0:case 1:o=u;break;case 4:t.label++;return{value:u[1],done:false};case 5:t.label++;i=u[1];u=[0];continue;case 7:u=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1];o=u;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(u);break}if(o[2])t.ops.pop();t.trys.pop();continue}u=e.call(n,t)}catch(n){u=[6,n];i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};System.register(["./p-94e3dad1.system.js","./p-c4dffc26.system.js","./p-dc68bab5.system.js"],(function(n){"use strict";var e,t,r;return{setters:[function(n){e=n.r;t=n.h},function(){},function(n){r=n.T}],execute:function(){var i=Object.keys;var o=Array.isArray;var u=typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;function a(n,e){if(typeof e!=="object")return n;i(e).forEach((function(t){n[t]=e[t]}));return n}var s=Object.getPrototypeOf;var c={}.hasOwnProperty;function f(n,e){return c.call(n,e)}function l(n,e){if(typeof e==="function")e=e(s(n));i(e).forEach((function(t){d(n,t,e[t])}))}var h=Object.defineProperty;function d(n,e,t,r){h(n,e,a(t&&f(t,"get")&&typeof t.get==="function"?{get:t.get,set:t.set,configurable:true}:{value:t,configurable:true,writable:true},r))}function v(n){return{from:function(e){n.prototype=Object.create(e.prototype);d(n.prototype,"constructor",n);return{extend:l.bind(null,n.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function y(n,e){var t=p(n,e),r;return t||(r=s(n))&&y(r,e)}var g=[].slice;function m(n,e,t){return g.call(n,e,t)}function b(n,e){return e(n)}function w(n){if(!n)throw new Error("Assertion Failed")}function _(n){if(u.setImmediate)setImmediate(n);else setTimeout(n,0)}function k(n,e){return n.reduce((function(n,t,r){var i=e(t,r);if(i)n[i[0]]=i[1];return n}),{})}function x(n,e){return function(){try{n.apply(this,arguments)}catch(n){e(n)}}}function j(n,e,t){try{n.apply(null,t)}catch(n){e&&e(n)}}function P(n,e){if(f(n,e))return n[e];if(!e)return n;if(typeof e!=="string"){var t=[];for(var r=0,i=e.length;r<i;++r){var o=P(n,e[r]);t.push(o)}return t}var u=e.indexOf(".");if(u!==-1){var a=n[e.substr(0,u)];return a===undefined?undefined:P(a,e.substr(u+1))}return undefined}function E(n,e,t){if(!n||e===undefined)return;if("isFrozen"in Object&&Object.isFrozen(n))return;if(typeof e!=="string"&&"length"in e){w(typeof t!=="string"&&"length"in t);for(var r=0,i=e.length;r<i;++r){E(n,e[r],t[r])}}else{var o=e.indexOf(".");if(o!==-1){var u=e.substr(0,o);var a=e.substr(o+1);if(a==="")if(t===undefined)delete n[u];else n[u]=t;else{var s=n[u];if(!s)s=n[u]={};E(s,a,t)}}else{if(t===undefined)delete n[e];else n[e]=t}}}function O(n,e){if(typeof e==="string")E(n,e,undefined);else if("length"in e)[].map.call(e,(function(e){E(n,e,undefined)}))}function S(n){var e={};for(var t in n){if(f(n,t))e[t]=n[t]}return e}var A=[].concat;function I(n){return A.apply([],n)}var D="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(I([8,16,32,64].map((function(n){return["Int","Uint","Float"].map((function(e){return e+n+"Array"}))})))).filter((function(n){return u[n]})).map((function(n){return u[n]}));function C(n){if(!n||typeof n!=="object")return n;var e;if(o(n)){e=[];for(var t=0,r=n.length;t<r;++t){e.push(C(n[t]))}}else if(D.indexOf(n.constructor)>=0){e=n}else{e=n.constructor?Object.create(n.constructor.prototype):{};for(var i in n){if(f(n,i)){e[i]=C(n[i])}}}return e}function T(n,e,t,r){t=t||{};r=r||"";i(n).forEach((function(i){if(!f(e,i))t[r+i]=undefined;else{var o=n[i],u=e[i];if(typeof o==="object"&&typeof u==="object"&&o&&u&&""+o.constructor===""+u.constructor)T(o,u,t,r+i+".");else if(o!==u)t[r+i]=e[i]}}));i(e).forEach((function(i){if(!f(n,i)){t[r+i]=e[i]}}));return t}var K=typeof Symbol!=="undefined"&&Symbol.iterator;var B=K?function(n){var e;return n!=null&&(e=n[K])&&e.apply(n)}:function(){return null};var F={};function M(n){var e,t,r,i;if(arguments.length===1){if(o(n))return n.slice();if(this===F&&typeof n==="string")return[n];if(i=B(n)){t=[];while(r=i.next(),!r.done)t.push(r.value);return t}if(n==null)return[n];e=n.length;if(typeof e==="number"){t=new Array(e);while(e--)t[e]=n[e];return t}return[n]}e=arguments.length;t=new Array(e);while(e--)t[e]=arguments[e];return t}var N=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function q(n,e){N=n;R=e}var R=function(){return true};var U=!new Error("").stack;function L(){if(U)try{throw new Error}catch(n){return n}return new Error}function V(n,e){var t=n.stack;if(!t)return"";e=e||0;if(t.indexOf(n.name)===0)e+=(n.name+n.message).split("\n").length;return t.split("\n").slice(e).filter(R).map((function(n){return"\n"+n})).join("")}function z(n,e){return function(){console.warn(n+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+V(L(),1));return e.apply(this,arguments)}}var W=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var Q=W.concat(H);var G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function J(n,e){this._e=L();this.name=n;this.message=e}v(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+V(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Y(n,e){return n+". Errors: "+e.map((function(n){return n.toString()})).filter((function(n,e,t){return t.indexOf(n)===e})).join("\n")}function X(n,e,t,r){this._e=L();this.failures=e;this.failedKeys=r;this.successCount=t}v(X).from(J);function $(n,e){this._e=L();this.name="BulkError";this.failures=e;this.message=Y(n,e)}v($).from(J);var Z=Q.reduce((function(n,e){return n[e]=e+"Error",n}),{});var nn=J;var en=Q.reduce((function(n,e){var t=e+"Error";function r(n,r){this._e=L();this.name=t;if(!n){this.message=G[e]||t;this.inner=null}else if(typeof n==="string"){this.message=n;this.inner=r||null}else if(typeof n==="object"){this.message=n.name+" "+n.message;this.inner=n}}v(r).from(nn);n[e]=r;return n}),{});en.Syntax=SyntaxError;en.Type=TypeError;en.Range=RangeError;var tn=H.reduce((function(n,e){n[e+"Error"]=en[e];return n}),{});function rn(n,e){if(!n||n instanceof J||n instanceof TypeError||n instanceof SyntaxError||!n.name||!tn[n.name])return n;var t=new tn[n.name](e||n.message,n);if("stack"in n){d(t,"stack",{get:function(){return this.inner.stack}})}return t}var on=Q.reduce((function(n,e){if(["Syntax","Type","Range"].indexOf(e)===-1)n[e+"Error"]=en[e];return n}),{});on.ModifyError=X;on.DexieError=J;on.BulkError=$;function un(){}function an(n){return n}function sn(n,e){if(n==null||n===an)return e;return function(t){return e(n(t))}}function cn(n,e){return function(){n.apply(this,arguments);e.apply(this,arguments)}}function fn(n,e){if(n===un)return e;return function(){var t=n.apply(this,arguments);if(t!==undefined)arguments[0]=t;var r=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var o=e.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?cn(r,this.onsuccess):r;if(i)this.onerror=this.onerror?cn(i,this.onerror):i;return o!==undefined?o:t}}function ln(n,e){if(n===un)return e;return function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null;e.apply(this,arguments);if(t)this.onsuccess=this.onsuccess?cn(t,this.onsuccess):t;if(r)this.onerror=this.onerror?cn(r,this.onerror):r}}function hn(n,e){if(n===un)return e;return function(t){var r=n.apply(this,arguments);a(t,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null;this.onerror=null;var u=e.apply(this,arguments);if(i)this.onsuccess=this.onsuccess?cn(i,this.onsuccess):i;if(o)this.onerror=this.onerror?cn(o,this.onerror):o;return r===undefined?u===undefined?undefined:u:a(r,u)}}function dn(n,e){if(n===un)return e;return function(){if(e.apply(this,arguments)===false)return false;return n.apply(this,arguments)}}function vn(n,e){if(n===un)return e;return function(){var t=n.apply(this,arguments);if(t&&typeof t.then==="function"){var r=this,i=arguments.length,o=new Array(i);while(i--)o[i]=arguments[i];return t.then((function(){return e.apply(r,o)}))}return e.apply(this,arguments)}}var pn={};var yn=100;var gn=20;var mn=7;var bn=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var n=u.Promise;return n?[n.resolve(),n.prototype,n.resolve()]:[]}}();var wn=bn[0];var _n=bn[1];var kn=bn[2];var xn=_n&&_n.then;var jn=wn&&wn.constructor;var Pn=bn[3];var En=!!kn;var On=false;var Sn=kn?function(){kn.then(Xn)}:u.setImmediate?setImmediate.bind(null,Xn):u.MutationObserver?function(){var n=document.createElement("div");new MutationObserver((function(){Xn();n=null})).observe(n,{attributes:true});n.setAttribute("i","1")}:function(){setTimeout(Xn,0)};var An=function(n,e){Nn.push([n,e]);if(Dn){Sn();Dn=false}};var In=true;var Dn=true;var Cn=[];var Tn=[];var Kn=null;var Bn=an;var Fn={id:"global",global:true,ref:0,unhandleds:[],onunhandled:Pe,pgp:false,env:{},finalize:function(){this.unhandleds.forEach((function(n){try{Pe(n[0],n[1])}catch(n){}}))}};var Mn=Fn;var Nn=[];var qn=0;var Rn=[];function Un(n){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=un;this._lib=false;var e=this._PSD=Mn;if(N){this._stackHolder=L();this._prev=null;this._numPrev=0}if(typeof n!=="function"){if(n!==pn)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)Wn(this,this._value);return}this._state=null;this._value=null;++e.ref;zn(this,n)}var Ln={get:function(){var n=Mn,e=fe;function t(t,r){var i=this;var o=!n.global&&(n!==Mn||e!==fe);if(o)ve();var u=new Un((function(e,u){Qn(i,new Vn(ke(t,n,o),ke(r,n,o),e,u,n))}));N&&Yn(u,this);return u}t.prototype=pn;return t},set:function(n){d(this,"then",n&&n.prototype===pn?Ln:{get:function(){return n},set:Ln.set})}};l(Un.prototype,{then:Ln,_then:function(n,e){Qn(this,new Vn(null,null,n,e,Mn))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e==="function"?this.then(null,(function(n){return n instanceof e?t(n):ie(n)})):this.then(null,(function(n){return n&&n.name===e?t(n):ie(n)}))},finally:function(n){return this.then((function(e){n();return e}),(function(e){n();return ie(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{On=true;var n=Jn(this,[],gn);var e=n.join("\nFrom previous: ");if(this._state!==null)this._stack=e;return e}finally{On=false}}},timeout:function(n,e){var t=this;return n<Infinity?new Un((function(r,i){var o=setTimeout((function(){return i(new en.Timeout(e))}),n);t.then(r,i).finally(clearTimeout.bind(null,o))})):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)d(Un.prototype,Symbol.toStringTag,"Promise");Fn.env=be();function Vn(n,e,t,r,i){this.onFulfilled=typeof n==="function"?n:null;this.onRejected=typeof e==="function"?e:null;this.resolve=t;this.reject=r;this.psd=i}l(Un,{all:function(){var n=M.apply(null,arguments).map(pe);return new Un((function(e,t){if(n.length===0)e([]);var r=n.length;n.forEach((function(i,o){return Un.resolve(i).then((function(t){n[o]=t;if(!--r)e(n)}),t)}))}))},resolve:function(n){if(n instanceof Un)return n;if(n&&typeof n.then==="function")return new Un((function(e,t){n.then(e,t)}));var e=new Un(pn,true,n);Yn(e,Kn);return e},reject:ie,race:function(){var n=M.apply(null,arguments).map(pe);return new Un((function(e,t){n.map((function(n){return Un.resolve(n).then(e,t)}))}))},PSD:{get:function(){return Mn},set:function(n){return Mn=n}},newPSD:he,usePSD:we,scheduler:{get:function(){return An},set:function(n){An=n}},rejectionMapper:{get:function(){return Bn},set:function(n){Bn=n}},follow:function(n,e){return new Un((function(t,r){return he((function(e,t){var r=Mn;r.unhandleds=[];r.onunhandled=t;r.finalize=cn((function(){var n=this;ee((function(){n.unhandleds.length===0?e():t(n.unhandleds[0])}))}),r.finalize);n()}),e,t,r)}))}});function zn(n,e){try{e((function(e){if(n._state!==null)return;if(e===n)throw new TypeError("A promise cannot be resolved with itself.");var t=n._lib&&$n();if(e&&typeof e.then==="function"){zn(n,(function(n,t){e instanceof Un?e._then(n,t):e.then(n,t)}))}else{n._state=true;n._value=e;Hn(n)}if(t)Zn()}),Wn.bind(null,n))}catch(e){Wn(n,e)}}function Wn(n,e){Tn.push(e);if(n._state!==null)return;var t=n._lib&&$n();e=Bn(e);n._state=false;n._value=e;N&&e!==null&&typeof e==="object"&&!e._promise&&j((function(){var t=y(e,"stack");e._promise=n;d(e,"stack",{get:function(){return On?t&&(t.get?t.get.apply(e):t.value):n.stack}})}));te(n);Hn(n);if(t)Zn()}function Hn(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t){Qn(n,e[t])}var i=n._PSD;--i.ref||i.finalize();if(qn===0){++qn;An((function(){if(--qn===0)ne()}),[])}}function Qn(n,e){if(n._state===null){n._listeners.push(e);return}var t=n._state?e.onFulfilled:e.onRejected;if(t===null){return(n._state?e.resolve:e.reject)(n._value)}++e.psd.ref;++qn;An(Gn,[t,n,e])}function Gn(n,e,t){try{Kn=e;var r,i=e._value;if(e._state){r=n(i)}else{if(Tn.length)Tn=[];r=n(i);if(Tn.indexOf(i)===-1)re(e)}t.resolve(r)}catch(n){t.reject(n)}finally{Kn=null;if(--qn===0)ne();--t.psd.ref||t.psd.finalize()}}function Jn(n,e,t){if(e.length===t)return e;var r="";if(n._state===false){var i=n._value,o,u;if(i!=null){o=i.name||"Error";u=i.message||i;r=V(i,0)}else{o=i;u=""}e.push(o+(u?": "+u:"")+r)}if(N){r=V(n._stackHolder,2);if(r&&e.indexOf(r)===-1)e.push(r);if(n._prev)Jn(n._prev,e,t)}return e}function Yn(n,e){var t=e?e._numPrev+1:0;if(t<yn){n._prev=e;n._numPrev=t}}function Xn(){$n()&&Zn()}function $n(){var n=In;In=false;Dn=false;return n}function Zn(){var n,e,t;do{while(Nn.length>0){n=Nn;Nn=[];t=n.length;for(e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}}}while(Nn.length>0);In=true;Dn=true}function ne(){var n=Cn;Cn=[];n.forEach((function(n){n._PSD.onunhandled.call(null,n._value,n)}));var e=Rn.slice(0);var t=e.length;while(t)e[--t]()}function ee(n){function e(){n();Rn.splice(Rn.indexOf(e),1)}Rn.push(e);++qn;An((function(){if(--qn===0)ne()}),[])}function te(n){if(!Cn.some((function(e){return e._value===n._value})))Cn.push(n)}function re(n){var e=Cn.length;while(e)if(Cn[--e]._value===n._value){Cn.splice(e,1);return}}function ie(n){return new Un(pn,false,n)}function oe(n,e){var t=Mn;return function(){var r=$n(),i=Mn;try{me(t,true);return n.apply(this,arguments)}catch(n){e&&e(n)}finally{me(i,false);if(r)Zn()}}}var ue={awaits:0,echoes:0,id:0};var ae=0;var se=[];var ce=0;var fe=0;var le=0;function he(n,e,t,r){var i=Mn,o=Object.create(i);o.parent=i;o.ref=0;o.global=false;o.id=++le;var u=Fn.env;o.env=En?{Promise:Un,PromiseProp:{value:Un,configurable:true,writable:true},all:Un.all,race:Un.race,resolve:Un.resolve,reject:Un.reject,nthen:xe(u.nthen,o),gthen:xe(u.gthen,o)}:{};if(e)a(o,e);++i.ref;o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=we(o,n,t,r);if(o.ref===0)o.finalize();return s}function de(){if(!ue.id)ue.id=++ae;++ue.awaits;ue.echoes+=mn;return ue.id}function ve(n){if(!ue.awaits||n&&n!==ue.id)return;if(--ue.awaits===0)ue.id=0;ue.echoes=ue.awaits*mn}function pe(n){if(ue.echoes&&n&&n.constructor===jn){de();return n.then((function(n){ve();return n}),(function(n){ve();return Ee(n)}))}return n}function ye(n){++fe;if(!ue.echoes||--ue.echoes===0){ue.echoes=ue.id=0}se.push(Mn);me(n,true)}function ge(){var n=se[se.length-1];se.pop();me(n,false)}function me(n,e){var t=Mn;if(e?ue.echoes&&(!ce++||n!==Mn):ce&&(!--ce||n!==Mn)){_e(e?ye.bind(null,n):ge)}if(n===Mn)return;Mn=n;if(t===Fn)Fn.env=be();if(En){var r=Fn.env.Promise;var i=n.env;_n.then=i.nthen;r.prototype.then=i.gthen;if(t.global||n.global){Object.defineProperty(u,"Promise",i.PromiseProp);r.all=i.all;r.race=i.race;r.resolve=i.resolve;r.reject=i.reject}}}function be(){var n=u.Promise;return En?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:n.all,race:n.race,resolve:n.resolve,reject:n.reject,nthen:_n.then,gthen:n.prototype.then}:{}}function we(n,e,t,r,i){var o=Mn;try{me(n,true);return e(t,r,i)}finally{me(o,false)}}function _e(n){xn.call(wn,n)}function ke(n,e,t){return typeof n!=="function"?n:function(){var r=Mn;if(t)de();me(e,true);try{return n.apply(this,arguments)}finally{me(r,false)}}}function xe(n,e){return function(t,r){return n.call(this,ke(t,e,false),ke(r,e,false))}}var je="unhandledrejection";function Pe(n,e){var t;try{t=e.onuncatched(n)}catch(n){}if(t!==false)try{var r,i={promise:e,reason:n};if(u.document&&document.createEvent){r=document.createEvent("Event");r.initEvent(je,true,true);a(r,i)}else if(u.CustomEvent){r=new CustomEvent(je,{detail:i});a(r,i)}if(r&&u.dispatchEvent){dispatchEvent(r);if(!u.PromiseRejectionEvent&&u.onunhandledrejection)try{u.onunhandledrejection(r)}catch(n){}}if(!r.defaultPrevented){console.warn("Unhandled rejection: "+(n.stack||n))}}catch(n){}}var Ee=Un.reject;function Oe(n){var e={};var t=function(t,r){if(r){var i=arguments.length,o=new Array(i-1);while(--i)o[i-1]=arguments[i];e[t].subscribe.apply(null,o);return n}else if(typeof t==="string"){return e[t]}};t.addEventType=a;for(var r=1,u=arguments.length;r<u;++r){a(arguments[r])}return t;function a(n,r,i){if(typeof n==="object")return s(n);if(!r)r=dn;if(!i)i=un;var o={subscribers:[],fire:i,subscribe:function(n){if(o.subscribers.indexOf(n)===-1){o.subscribers.push(n);o.fire=r(o.fire,n)}},unsubscribe:function(n){o.subscribers=o.subscribers.filter((function(e){return e!==n}));o.fire=o.subscribers.reduce(r,i)}};e[n]=t[n]=o;return o}function s(n){i(n).forEach((function(e){var t=n[e];if(o(t)){a(e,n[e][0],n[e][1])}else if(t==="asap"){var r=a(e,an,(function n(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];r.subscribers.forEach((function(n){_((function e(){n.apply(null,t)}))}))}))}else throw new en.InvalidArgument("Invalid event config")}))}}var Se="{version}";var Ae=String.fromCharCode(65535);var Ie=function(){try{IDBKeyRange.only([[]]);return[[]]}catch(n){return Ae}}();var De=-Infinity;var Ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var Te="String expected.";var Ke=[];var Be=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);var Fe=Be;var Me=Be;var Ne=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};var qe;q(N,Ne);function Re(n,e){var t=Re.dependencies;var r=a({addons:Re.addons,autoOpen:true,indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},e);var s=r.addons,c=r.autoOpen,h=r.indexedDB,v=r.IDBKeyRange;var p=this._dbSchema={};var y=[];var g=[];var _={};var O=null;var A=null;var D=false;var K=null;var B=false;var q="readonly",R="readwrite";var U=this;var V,W=new Un((function(n){V=n})),H,Q=new Un((function(n,e){H=e}));var G=true;var J=!!$e(h),Y;function Z(){U.on("versionchange",(function(n){if(n.newVersion>0)console.warn("Another connection wants to upgrade database '"+U.name+"'. Closing db now to resume the upgrade.");else console.warn("Another connection wants to delete database '"+U.name+"'. Closing db now to resume the delete request.");U.close()}));U.on("blocked",(function(n){if(!n.newVersion||n.newVersion<n.oldVersion)console.warn("Dexie.delete('"+U.name+"') was blocked");else console.warn("Upgrade '"+U.name+"' blocked by other connection holding version "+n.oldVersion/10)}))}this.version=function(n){if(O||D)throw new en.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var e=y.filter((function(e){return e._cfg.version===n}))[0];if(e)return e;e=new nn(n);y.push(e);y.sort(Sn);G=false;return e};function nn(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null};this.stores({})}a(nn.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,n):n;var e={};y.forEach((function(n){a(e,n._cfg.storesSource)}));var t=this._cfg.dbschema={};this._parseStoresSpec(e,t);p=U._dbSchema=t;In([_,U,kn.prototype]);An([_,U,kn.prototype,this._cfg.tables],i(t),t);g=i(t);return this},upgrade:function(n){this._cfg.contentUpgrade=n;return this},_parseStoresSpec:function(n,e){i(n).forEach((function(t){if(n[t]!==null){var r={};var i=Cn(n[t]);var o=i.shift();if(o.multi)throw new en.Schema("Primary key cannot be multi-valued");if(o.keyPath)E(r,o.keyPath,o.auto?0:o.keyPath);i.forEach((function(n){if(n.auto)throw new en.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new en.Schema("Index must have a name and cannot be an empty string");E(r,n.keyPath,n.compound?n.keyPath.map((function(){return""})):"")}));e[t]=new Ye(t,o,i,r)}}))}});function tn(n,e,t){var r=U._createTransaction(R,g,p);r.create(e);r._completion.catch(t);var o=r._reject.bind(r);he((function(){Mn.trans=r;if(n===0){i(p).forEach((function(n){cn(e,n,p[n].primKey,p[n].indexes)}));Un.follow((function(){return U.on.populate.fire(r)})).catch(o)}else rn(n,r,e).catch(o)}))}function rn(n,e,t){var r=[];var i=y.filter((function(e){return e._cfg.version===n}))[0];if(!i)throw new en.Upgrade("Dexie specification of currently installed DB version is missing");p=U._dbSchema=i._cfg.dbschema;var o=false;var u=y.filter((function(e){return e._cfg.version>n}));u.forEach((function(n){r.push((function(){var r=p;var i=n._cfg.dbschema;zn(r,t);zn(i,t);p=U._dbSchema=i;var u=on(r,i);u.add.forEach((function(n){cn(t,n[0],n[1].primKey,n[1].indexes)}));u.change.forEach((function(n){if(n.recreate){throw new en.Upgrade("Not yet support for changing primary key")}else{var e=t.objectStore(n.name);n.add.forEach((function(n){yn(e,n)}));n.change.forEach((function(n){e.deleteIndex(n.name);yn(e,n)}));n.del.forEach((function(n){e.deleteIndex(n)}))}}));if(n._cfg.contentUpgrade){o=true;return Un.follow((function(){n._cfg.contentUpgrade(e)}))}}));r.push((function(e){if(!o||!Fe){var t=n._cfg.dbschema;pn(t,e)}}))}));function a(){return r.length?Un.resolve(r.shift()(e.idbtrans)).then(a):Un.resolve()}return a().then((function(){dn(p,t)}))}function on(n,e){var t={del:[],add:[],change:[]};for(var r in n){if(!e[r])t.del.push(r)}for(r in e){var i=n[r],o=e[r];if(!i){t.add.push([r,o])}else{var u={name:r,def:o,recreate:false,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src){u.recreate=true;t.change.push(u)}else{var a=i.idxByName;var s=o.idxByName;for(var c in a){if(!s[c])u.del.push(c)}for(c in s){var f=a[c],l=s[c];if(!f)u.add.push(l);else if(f.src!==l.src)u.change.push(l)}if(u.del.length>0||u.add.length>0||u.change.length>0){t.change.push(u)}}}}return t}function cn(n,e,t,r){var i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});r.forEach((function(n){yn(i,n)}));return i}function dn(n,e){i(n).forEach((function(t){if(!e.db.objectStoreNames.contains(t)){cn(e,t,n[t].primKey,n[t].indexes)}}))}function pn(n,e){for(var t=0;t<e.db.objectStoreNames.length;++t){var r=e.db.objectStoreNames[t];if(n[r]==null){e.db.deleteObjectStore(r)}}}function yn(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}this._allTables=_;this._createTransaction=function(n,e,t,r){return new kn(n,e,t,r)};function gn(n,e,t){if(!B&&!Mn.letThrough){if(!D){if(!c)return Ee(new en.DatabaseClosed);U.open().catch(un)}return W.then((function(){return gn(n,e,t)}))}else{var r=U._createTransaction(n,e,p);try{r.create()}catch(n){return Ee(n)}return r._promise(n,(function(n,e){return he((function(){Mn.trans=r;return t(n,e,r)}))})).then((function(n){return r._completion.then((function(){return n}))}))}}this._whenReady=function(n){return B||Mn.letThrough?n():new Un((function(n,e){if(!D){if(!c){e(new en.DatabaseClosed);return}U.open().catch(un)}W.then(n,e)})).then(n)};this.verno=0;this.open=function(){if(D||O)return W.then((function(){return A?Ee(A):U}));N&&(Q._stackHolder=L());D=true;A=null;B=false;var e=V,t=null;return Un.race([Q,new Un((function(e,r){if(!h)throw new en.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL "+"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=G?h.open(n):h.open(n,Math.round(U.verno*10));if(!i)throw new en.MissingAPI("IndexedDB API not available");i.onerror=ze(r);i.onblocked=oe(Wn);i.onupgradeneeded=oe((function(e){t=i.transaction;if(G&&!U._allowEmptyDB){i.onerror=Qe;t.abort();i.result.close();var o=h.deleteDatabase(n);o.onsuccess=o.onerror=oe((function(){r(new en.NoSuchDatabase("Database "+n+" doesnt exist"))}))}else{t.onerror=ze(r);var u=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;tn(u/10,t,r)}}),r);i.onsuccess=oe((function(){t=null;O=i.result;Ke.push(U);if(G)Vn();else if(O.objectStoreNames.length>0){try{zn(p,O.transaction(Xe(O.objectStoreNames),q))}catch(n){}}O.onversionchange=oe((function(n){U._vcFired=true;U.on("versionchange").fire(n)}));if(!J&&n!=="__dbnames"){qe.dbnames.put({name:n}).catch(un)}e()}),r)}))]).then((function(){K=[];return Un.resolve(Re.vip(U.on.ready.fire)).then((function n(){if(K.length>0){var e=K.reduce(vn,un);K=[];return Un.resolve(Re.vip(e)).then(n)}}))})).finally((function(){K=null})).then((function(){D=false;return U})).catch((function(n){try{t&&t.abort()}catch(n){}D=false;U.close();A=n;return Ee(A)})).finally((function(){B=true;e()}))};this.close=function(){var n=Ke.indexOf(U);if(n>=0)Ke.splice(n,1);if(O){try{O.close()}catch(n){}O=null}c=false;A=new en.DatabaseClosed;if(D)H(A);W=new Un((function(n){V=n}));Q=new Un((function(n,e){H=e}))};this.delete=function(){var e=arguments.length>0;return new Un((function(t,r){if(e)throw new en.InvalidArgument("Arguments not allowed in db.delete()");if(D){W.then(i)}else{i()}function i(){U.close();var e=h.deleteDatabase(n);e.onsuccess=oe((function(){if(!J){qe.dbnames.delete(n).catch(un)}t()}));e.onerror=ze(r);e.onblocked=Wn}}))};this.backendDB=function(){return O};this.isOpen=function(){return O!==null};this.hasBeenClosed=function(){return A&&A instanceof en.DatabaseClosed};this.hasFailed=function(){return A!==null};this.dynamicallyOpened=function(){return G};this.name=n;l(this,{tables:{get:function(){return i(_).map((function(n){return _[n]}))}}});this.on=Oe(this,"populate","blocked","versionchange",{ready:[vn,un]});this.on.ready.subscribe=b(this.on.ready.subscribe,(function(n){return function(e,t){Re.vip((function(){if(B){if(!A)Un.resolve().then(e);if(t)n(e)}else if(K){K.push(e);if(t)n(e)}else{n(e);if(!t)n((function n(){U.on.ready.unsubscribe(e);U.on.ready.unsubscribe(n)}))}}))}}));this.transaction=function(){var n=mn.apply(this,arguments);return this._transaction.apply(this,n)};function mn(n,e,t){var r=arguments.length;if(r<2)throw new en.InvalidArgument("Too few arguments");var i=new Array(r-1);while(--r)i[r-1]=arguments[r];t=i.pop();var o=I(i);return[n,o,t]}this._transaction=function(n,e,t){var r=Mn.trans;if(!r||r.db!==U||n.indexOf("!")!==-1)r=null;var i=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{var o=e.map((function(n){var e=n instanceof bn?n.name:n;if(typeof e!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}));if(n=="r"||n==q)n=q;else if(n=="rw"||n==R)n=R;else throw new en.InvalidArgument("Invalid transaction mode: "+n);if(r){if(r.mode===q&&n===R){if(i){r=null}else throw new en.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(r){o.forEach((function(n){if(r&&r.storeNames.indexOf(n)===-1){if(i){r=null}else throw new en.SubTransaction("Table "+n+" not included in parent transaction.")}}))}if(i&&r&&!r.active){r=null}}}catch(n){return r?r._promise(null,(function(e,t){t(n)})):Ee(n)}return r?r._promise(n,u,"lock"):Mn.trans?we(Mn.transless,(function(){return U._whenReady(u)})):U._whenReady(u);function u(){return Un.resolve().then((function(){var e=Mn.transless||Mn;var i=U._createTransaction(n,o,p,r);var u={trans:i,transless:e};if(r){i.idbtrans=r.idbtrans}else{i.create()}if(t.constructor===Pn){de()}var a;var s=Un.follow((function(){a=t.call(i,i);if(a){if(a.constructor===jn){var n=ve.bind(null,null);a.then(n,n)}else if(typeof a.next==="function"&&typeof a.throw==="function"){a=Ge(a)}}}),u);return(a&&typeof a.then==="function"?Un.resolve(a).then((function(n){return i.active?n:Ee(new en.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):s.then((function(){return a}))).then((function(n){if(r)i._resolve();return i._completion.then((function(){return n}))})).catch((function(n){i._reject(n);return Ee(n)}))}))}};this.table=function(n){if(!f(_,n)){throw new en.InvalidTable("Table "+n+" does not exist")}return _[n]};function bn(n,e,t){this.name=n;this.schema=e;this._tx=t;this.hook=_[n]?_[n].hook:Oe(null,{creating:[fn,un],reading:[sn,an],updating:[hn,un],deleting:[ln,un]})}function wn(n,e,t){return(t?He:ze)((function(t){n.push(t);e&&e()}))}function _n(n,e,t,r,i){return new Un((function(o,u){var a=t.length,s=a-1;if(a===0)return o();if(!r){for(var c=0;c<a;++c){var f=n.delete(t[c]);f.onerror=ze(u);if(c===s)f.onsuccess=oe((function(){return o()}))}}else{var l,h=He(u),d=Ve(null);j((function(){for(var r=0;r<a;++r){l={onsuccess:null,onerror:null};var u=t[r];i.call(l,u[0],u[1],e);var c=n.delete(u[0]);c._hookCtx=l;c.onerror=h;if(r===s)c.onsuccess=Ve(o);else c.onsuccess=d}}),(function(n){l.onerror&&l.onerror(n);throw n}))}}))}l(bn.prototype,{_trans:function n(e,t,r){var i=this._tx||Mn.trans;return i&&i.db===U?i===Mn.trans?i._promise(e,t,r):he((function(){return i._promise(e,t,r)}),{trans:i,transless:Mn.transless||Mn}):gn(e,[this.name],t)},_idbstore:function n(e,t,r){var i=this.name;function o(n,e,r){if(r.storeNames.indexOf(i)===-1)throw new en.NotFound("Table"+i+" not part of transaction");return t(n,e,r.idbtrans.objectStore(i),r)}return this._trans(e,o,r)},get:function(n,e){if(n&&n.constructor===Object)return this.where(n).first(e);var t=this;return this._idbstore(q,(function(e,r,i){var o=i.get(n);o.onerror=ze(r);o.onsuccess=oe((function(){e(t.hook.reading.fire(o.result))}),r)})).then(e)},where:function(n){if(typeof n==="string")return new xn(this,n);if(o(n))return new xn(this,"["+n.join("+")+"]");var e=i(n);if(e.length===1)return this.where(e[0]).equals(n[e[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter((function(n){return n.compound&&e.every((function(e){return n.keyPath.indexOf(e)>=0}))&&n.keyPath.every((function(n){return e.indexOf(n)>=0}))}))[0];if(t&&Ie!==Ae)return this.where(t.name).equals(t.keyPath.map((function(e){return n[e]})));if(!t)console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a "+("compound index ["+e.join("+")+"]"));var r=this.schema.idxByName;var u=e.reduce((function(e,t){return[e[0]||r[t],e[0]||!r[t]?Ln(e[1],(function(e){return""+P(e,t)==""+n[t]})):e[1]]}),[null,null]);var a=u[0];return a?this.where(a.name).equals(n[a.keyPath]).filter(u[1]):t?this.filter(u[1]):this.where(e).equals("")},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new En(new xn(this,o(n)?"["+n.join("+")+"]":n))},toCollection:function(){return new En(new xn(this))},mapToClass:function(n,e){this.schema.mappedClass=n;var t=Object.create(n.prototype);if(e){Le(t,e)}this.schema.instanceTemplate=t;var r=function(e){if(!e)return e;var t=Object.create(n.prototype);for(var r in e)if(f(e,r))try{t[r]=e[r]}catch(n){}return t};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=r;this.hook("reading",r);return n},defineClass:function(n){return this.mapToClass(Re.defineClass(n),n)},bulkDelete:function(n){if(this.hook.deleting.fire===un){return this._idbstore(R,(function(e,t,r,i){e(_n(r,i,n,false,un))}))}else{return this.where(":id").anyOf(n).delete().then((function(){}))}},bulkPut:function(n,e){var t=this;return this._idbstore(R,(function(r,i,o){if(!o.keyPath&&!t.schema.primKey.auto&&!e)throw new en.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&e)throw new en.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new en.InvalidArgument("Arguments objects and keys must have the same length");if(n.length===0)return r();var u=function(n){if(s.length===0)r(n);else i(new $(t.name+".bulkPut(): "+s.length+" of "+f+" operations failed",s))};var a,s=[],c,f=n.length,l=t;if(t.hook.creating.fire===un&&t.hook.updating.fire===un){c=wn(s);for(var h=0,d=n.length;h<d;++h){a=e?o.put(n[h],e[h]):o.put(n[h]);a.onerror=c}a.onerror=wn(s,u);a.onsuccess=We(u)}else{var v=e||o.keyPath&&n.map((function(n){return P(n,o.keyPath)}));var p=v&&k(v,(function(e,t){return e!=null&&[e,n[t]]}));var y=!v?l.bulkAdd(n):l.where(":id").anyOf(v.filter((function(n){return n!=null}))).modify((function(){this.value=p[this.primKey];p[this.primKey]=null})).catch(X,(function(n){s=n.failures})).then((function(){var t=[],r=e&&[];for(var i=v.length-1;i>=0;--i){var o=v[i];if(o==null||p[o]){t.push(n[i]);e&&r.push(o);if(o!=null)p[o]=null}}t.reverse();e&&r.reverse();return l.bulkAdd(t,r)})).then((function(n){var e=v[v.length-1];return e!=null?e:n}));y.then(u).catch($,(function(n){s=s.concat(n.failures);u()})).catch(i)}}),"locked")},bulkAdd:function(n,e){var t=this,r=this.hook.creating.fire;return this._idbstore(R,(function(i,o,u,a){if(!u.keyPath&&!t.schema.primKey.auto&&!e)throw new en.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&e)throw new en.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new en.InvalidArgument("Arguments objects and keys must have the same length");if(n.length===0)return i();function s(n){if(f.length===0)i(n);else o(new $(t.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var c,f=[],l,h,d=n.length;if(r!==un){var v=u.keyPath,p;l=wn(f,null,true);h=Ve(null);j((function(){for(var t=0,i=n.length;t<i;++t){p={onerror:null,onsuccess:null};var o=e&&e[t];var s=n[t],f=e?o:v?P(s,v):undefined,d=r.call(p,f,s,a);if(f==null&&d!=null){if(v){s=C(s);E(s,v,d)}else{o=d}}c=o!=null?u.add(s,o):u.add(s);c._hookCtx=p;if(t<i-1){c.onerror=l;if(p.onsuccess)c.onsuccess=h}}}),(function(n){p.onerror&&p.onerror(n);throw n}));c.onerror=wn(f,s,true);c.onsuccess=Ve(s)}else{l=wn(f);for(var y=0,g=n.length;y<g;++y){c=e?u.add(n[y],e[y]):u.add(n[y]);c.onerror=l}c.onerror=wn(f,s);c.onsuccess=We(s)}}))},add:function(n,e){var t=this.hook.creating.fire;return this._idbstore(R,(function(r,i,o,u){var a={onsuccess:null,onerror:null};if(t!==un){var s=e!=null?e:o.keyPath?P(n,o.keyPath):undefined;var c=t.call(a,s,n,u);if(s==null&&c!=null){if(o.keyPath)E(n,o.keyPath,c);else e=c}}try{var f=e!=null?o.add(n,e):o.add(n);f._hookCtx=a;f.onerror=He(i);f.onsuccess=Ve((function(e){var t=o.keyPath;if(t)E(n,t,e);r(e)}))}catch(n){if(a.onerror)a.onerror(n);throw n}}))},put:function(n,e){var t=this;var r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==un||i!==un){var o=this.schema.primKey.keyPath;var u=e!==undefined?e:o&&P(n,o);if(u==null)return this.add(n);n=C(n);return this._trans(R,(function(){return t.where(":id").equals(u).modify((function(){this.value=n})).then((function(r){return r===0?t.add(n,e):u}))}),"locked")}else{return this._idbstore(R,(function(t,r,i){var o=e!==undefined?i.put(n,e):i.put(n);o.onerror=ze(r);o.onsuccess=oe((function(e){var r=i.keyPath;if(r)E(n,r,e.target.result);t(o.result)}))}))}},delete:function(n){if(this.hook.deleting.subscribers.length){return this.where(":id").equals(n).delete()}else{return this._idbstore(R,(function(e,t,r){var i=r.delete(n);i.onerror=ze(t);i.onsuccess=oe((function(){e(i.result)}))}))}},clear:function(){if(this.hook.deleting.subscribers.length){return this.toCollection().delete()}else{return this._idbstore(R,(function(n,e,t){var r=t.clear();r.onerror=ze(e);r.onsuccess=oe((function(){n(r.result)}))}))}},update:function(n,e){if(typeof e!=="object"||o(e))throw new en.InvalidArgument("Modifications must be an object.");if(typeof n==="object"&&!o(n)){i(e).forEach((function(t){E(n,t,e[t])}));var t=P(n,this.schema.primKey.keyPath);if(t===undefined)return Ee(new en.InvalidArgument("Given object does not contain its primary key"));return this.where(":id").equals(t).modify(e)}else{return this.where(":id").equals(n).modify(e)}}});function kn(n,e,t,r){var i=this;this.db=U;this.mode=n;this.storeNames=e;this.idbtrans=null;this.on=Oe(this,"complete","error","abort");this.parent=r||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new Un((function(n,e){i._resolve=n;i._reject=e}));this._completion.then((function(){i.active=false;i.on.complete.fire()}),(function(n){var e=i.active;i.active=false;i.on.error.fire(n);i.parent?i.parent._reject(n):e&&i.idbtrans&&i.idbtrans.abort();return Ee(n)}))}l(kn.prototype,{_lock:function(){w(!Mn.global);++this._reculock;if(this._reculock===1&&!Mn.global)Mn.lockOwnerFor=this;return this},_unlock:function(){w(!Mn.global);if(--this._reculock===0){if(!Mn.global)Mn.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var n=this._blockedFuncs.shift();try{we(n[1],n[0])}catch(n){}}}return this},_locked:function(){return this._reculock&&Mn.lockOwnerFor!==this},create:function(n){var e=this;if(!this.mode)return this;w(!this.idbtrans);if(!n&&!O){switch(A&&A.name){case"DatabaseClosedError":throw new en.DatabaseClosed(A);case"MissingAPIError":throw new en.MissingAPI(A.message,A);default:throw new en.OpenFailed(A)}}if(!this.active)throw new en.TransactionInactive;w(this._completion._state===null);n=this.idbtrans=n||O.transaction(Xe(this.storeNames),this.mode);n.onerror=oe((function(t){Qe(t);e._reject(n.error)}));n.onabort=oe((function(t){Qe(t);e.active&&e._reject(new en.Abort(n.error));e.active=false;e.on("abort").fire(t)}));n.oncomplete=oe((function(){e.active=false;e._resolve()}));return this},_promise:function(n,e,t){var r=this;if(n===R&&this.mode!==R)return Ee(new en.ReadOnly("Transaction is readonly"));if(!this.active)return Ee(new en.TransactionInactive);if(this._locked()){return new Un((function(i,o){r._blockedFuncs.push([function(){r._promise(n,e,t).then(i,o)},Mn])}))}else if(t){return he((function(){var n=new Un((function(n,t){r._lock();var i=e(n,t,r);if(i&&i.then)i.then(n,t)}));n.finally((function(){return r._unlock()}));n._lib=true;return n}))}else{var i=new Un((function(n,t){var i=e(n,t,r);if(i&&i.then)i.then(n,t)}));i._lib=true;return i}},_root:function(){return this.parent?this.parent._root():this},waitFor:function(n){var e=this._root();n=Un.resolve(n);if(e._waitingFor){e._waitingFor=e._waitingFor.then((function(){return n}))}else{e._waitingFor=n;e._waitingQueue=[];var t=e.idbtrans.objectStore(e.storeNames[0]);(function n(){++e._spinCount;while(e._waitingQueue.length)e._waitingQueue.shift()();if(e._waitingFor)t.get(-Infinity).onsuccess=n})()}var r=e._waitingFor;return new Un((function(t,i){n.then((function(n){return e._waitingQueue.push(oe(t.bind(null,n)))}),(function(n){return e._waitingQueue.push(oe(i.bind(null,n)))})).finally((function(){if(e._waitingFor===r){e._waitingFor=null}}))}))},abort:function(){this.active&&this._reject(new en.Abort);this.active=false},tables:{get:z("Transaction.tables",(function(){return _}))},table:function(n){var e=U.table(n);return new bn(n,e.schema,this)}});function xn(n,e,t){this._ctx={table:n,index:e===":id"?null:e,or:t}}l(xn.prototype,(function(){function n(n,e,t){var r=n instanceof xn?new En(n):n;r._ctx.error=t?new t(e):new TypeError(e);return r}function e(n){return new En(n,(function(){return v.only("")})).limit(0)}function t(n){return n==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function r(n){return n==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function i(n,e,t,r,i,o){var u=Math.min(n.length,r.length);var a=-1;for(var s=0;s<u;++s){var c=e[s];if(c!==r[s]){if(i(n[s],t[s])<0)return n.substr(0,s)+t[s]+t.substr(s+1);if(i(n[s],r[s])<0)return n.substr(0,s)+r[s]+t.substr(s+1);if(a>=0)return n.substr(0,a)+e[a]+t.substr(a+1);return null}if(i(n[s],c)<0)a=s}if(u<r.length&&o==="next")return n+t.substr(n.length);if(u<n.length&&o==="prev")return n.substr(0,t.length);return a<0?null:n.substr(0,a)+r[a]+t.substr(a+1)}function o(e,o,u,a){var s,c,f,l,h,d,p,y=u.length;if(!u.every((function(n){return typeof n==="string"}))){return n(e,Te)}function g(n){s=t(n);c=r(n);f=n==="next"?qn:Rn;var e=u.map((function(n){return{lower:c(n),upper:s(n)}})).sort((function(n,e){return f(n.lower,e.lower)}));l=e.map((function(n){return n.upper}));h=e.map((function(n){return n.lower}));d=n;p=n==="next"?"":a}g("next");var m=new En(e,(function(){return v.bound(l[0],h[y-1]+a)}));m._ondirectionchange=function(n){g(n)};var b=0;m._addAlgorithm((function(n,e,t){var r=n.key;if(typeof r!=="string")return false;var u=c(r);if(o(u,h,b)){return true}else{var a=null;for(var s=b;s<y;++s){var v=i(r,u,l[s],h[s],f,d);if(v===null&&a===null)b=s+1;else if(a===null||f(a,v)>0){a=v}}if(a!==null){e((function(){n.continue(a+p)}))}else{e(t)}return false}}));return m}return{between:function(t,r,i,o){i=i!==false;o=o===true;try{if(Tn(t,r)>0||Tn(t,r)===0&&(i||o)&&!(i&&o))return e(this);return new En(this,(function(){return v.bound(t,r,!i,!o)}))}catch(e){return n(this,Ce)}},equals:function(n){return new En(this,(function(){return v.only(n)}))},above:function(n){return new En(this,(function(){return v.lowerBound(n,true)}))},aboveOrEqual:function(n){return new En(this,(function(){return v.lowerBound(n)}))},below:function(n){return new En(this,(function(){return v.upperBound(n,true)}))},belowOrEqual:function(n){return new En(this,(function(){return v.upperBound(n)}))},startsWith:function(e){if(typeof e!=="string")return n(this,Te);return this.between(e,e+Ae,true,true)},startsWithIgnoreCase:function(n){if(n==="")return this.startsWith(n);return o(this,(function(n,e){return n.indexOf(e[0])===0}),[n],Ae)},equalsIgnoreCase:function(n){return o(this,(function(n,e){return n===e[0]}),[n],"")},anyOfIgnoreCase:function(){var n=M.apply(F,arguments);if(n.length===0)return e(this);return o(this,(function(n,e){return e.indexOf(n)!==-1}),n,"")},startsWithAnyOfIgnoreCase:function(){var n=M.apply(F,arguments);if(n.length===0)return e(this);return o(this,(function(n,e){return e.some((function(e){return n.indexOf(e)===0}))}),n,Ae)},anyOf:function(){var t=M.apply(F,arguments);var r=Fn;try{t.sort(r)}catch(e){return n(this,Ce)}if(t.length===0)return e(this);var i=new En(this,(function(){return v.bound(t[0],t[t.length-1])}));i._ondirectionchange=function(n){r=n==="next"?Fn:Nn;t.sort(r)};var o=0;i._addAlgorithm((function(n,e,i){var u=n.key;while(r(u,t[o])>0){++o;if(o===t.length){e(i);return false}}if(r(u,t[o])===0){return true}else{e((function(){n.continue(t[o])}));return false}}));return i},notEqual:function(n){return this.inAnyRange([[De,n],[n,Ie]],{includeLowers:false,includeUppers:false})},noneOf:function(){var e=M.apply(F,arguments);if(e.length===0)return new En(this);try{e.sort(Fn)}catch(e){return n(this,Ce)}var t=e.reduce((function(n,e){return n?n.concat([[n[n.length-1][1],e]]):[[De,e]]}),null);t.push([e[e.length-1],Ie]);return this.inAnyRange(t,{includeLowers:false,includeUppers:false})},inAnyRange:function(t,r){if(t.length===0)return e(this);if(!t.every((function(n){return n[0]!==undefined&&n[1]!==undefined&&Fn(n[0],n[1])<=0}))){return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",en.InvalidArgument)}var i=!r||r.includeLowers!==false;var o=r&&r.includeUppers===true;function u(n,e){for(var t=0,r=n.length;t<r;++t){var i=n[t];if(Tn(e[0],i[1])<0&&Tn(e[1],i[0])>0){i[0]=Kn(i[0],e[0]);i[1]=Bn(i[1],e[1]);break}}if(t===r)n.push(e);return n}var a=Fn;function s(n,e){return a(n[0],e[0])}var c;try{c=t.reduce(u,[]);c.sort(s)}catch(e){return n(this,Ce)}var f=0;var l=o?function(n){return Fn(n,c[f][1])>0}:function(n){return Fn(n,c[f][1])>=0};var h=i?function(n){return Nn(n,c[f][0])>0}:function(n){return Nn(n,c[f][0])>=0};function d(n){return!l(n)&&!h(n)}var p=l;var y=new En(this,(function(){return v.bound(c[0][0],c[c.length-1][1],!i,!o)}));y._ondirectionchange=function(n){if(n==="next"){p=l;a=Fn}else{p=h;a=Nn}c.sort(s)};y._addAlgorithm((function(n,e,t){var r=n.key;while(p(r)){++f;if(f===c.length){e(t);return false}}if(d(r)){return true}else if(Tn(r,c[f][1])===0||Tn(r,c[f][0])===0){return false}else{e((function(){if(a===Fn)n.continue(c[f][0]);else n.continue(c[f][1])}));return false}}));return y},startsWithAnyOf:function(){var t=M.apply(F,arguments);if(!t.every((function(n){return typeof n==="string"}))){return n(this,"startsWithAnyOf() only works with strings")}if(t.length===0)return e(this);return this.inAnyRange(t.map((function(n){return[n,n+Ae]})))}}}));function En(n,e){var t=null,r=null;if(e)try{t=e()}catch(n){r=n}var i=n._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:t,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function On(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}l(En.prototype,(function(){function n(n,e){n.filter=Ln(n.filter,e)}function e(n,e,t){var r=n.replayFilter;n.replayFilter=r?function(){return Ln(r(),e())}:e;n.justLimit=t&&!r}function t(n,e){n.isMatch=Ln(n.isMatch,e)}function r(n,e){if(n.isPrimKey)return e;var t=n.table.schema.idxByName[n.index];if(!t)throw new en.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return e.index(t.name)}function o(n,e){var t=r(n,e);return n.keysOnly&&"openKeyCursor"in t?t.openKeyCursor(n.range||null,n.dir+n.unique):t.openCursor(n.range||null,n.dir+n.unique)}function u(n,e,t,r,i){var u=n.replayFilter?Ln(n.filter,n.replayFilter()):n.filter;if(!n.or){Dn(o(n,i),Ln(n.algorithm,u),e,t,r,!n.keysOnly&&n.valueMapper)}else(function(){var a={};var s=0;function c(){if(++s===2)t()}function l(n,t,i){if(!u||u(t,i,c,r)){var o=t.primaryKey;var s=""+o;if(s==="[object ArrayBuffer]")s=""+new Uint8Array(o);if(!f(a,s)){a[s]=true;e(n,t,i)}}}n.or._iterate(l,c,r,i);Dn(o(n,i),n.algorithm,l,c,r,!n.keysOnly&&n.valueMapper)})()}return{_read:function(n,e){var t=this._ctx;return t.error?t.table._trans(null,Ee.bind(null,t.error)):t.table._idbstore(q,n).then(e)},_write:function(n){var e=this._ctx;return e.error?e.table._trans(null,Ee.bind(null,e.error)):e.table._idbstore(R,n,"locked")},_addAlgorithm:function(n){var e=this._ctx;e.algorithm=Ln(e.algorithm,n)},_iterate:function(n,e,t,r){return u(this._ctx,n,e,t,r)},clone:function(n){var e=Object.create(this.constructor.prototype),t=Object.create(this._ctx);if(n)a(t,n);e._ctx=t;return e},raw:function(){this._ctx.valueMapper=null;return this},each:function(n){var e=this._ctx;return this._read((function(t,r,i){u(e,n,t,r,i)}))},count:function(n){var e=this._ctx;if(On(e,true)){return this._read((function(n,t,i){var o=r(e,i);var u=e.range?o.count(e.range):o.count();u.onerror=ze(t);u.onsuccess=function(t){n(Math.min(t.target.result,e.limit))}}),n)}else{var t=0;return this._read((function(n,r,i){u(e,(function(){++t;return false}),(function(){n(t)}),r,i)}),n)}},sortBy:function(n,e){var t=n.split(".").reverse(),r=t[0],i=t.length-1;function o(n,e){if(e)return o(n[t[e]],e-1);return n[r]}var u=this._ctx.dir==="next"?1:-1;function a(n,e){var t=o(n,i),r=o(e,i);return t<r?-u:t>r?u:0}return this.toArray((function(n){return n.sort(a)})).then(e)},toArray:function(n){var e=this._ctx;return this._read((function(n,t,i){if(Y&&e.dir==="next"&&On(e,true)&&e.limit>0){var o=e.table.hook.reading.fire;var a=r(e,i);var s=e.limit<Infinity?a.getAll(e.range,e.limit):a.getAll(e.range);s.onerror=ze(t);s.onsuccess=o===an?We(n):We((function(e){try{n(e.map(o))}catch(n){t(n)}}))}else{var c=[];u(e,(function(n){c.push(n)}),(function e(){n(c)}),t,i)}}),n)},offset:function(n){var t=this._ctx;if(n<=0)return this;t.offset+=n;if(On(t)){e(t,(function(){var e=n;return function(n,t){if(e===0)return true;if(e===1){--e;return false}t((function(){n.advance(e);e=0}));return false}}))}else{e(t,(function(){var e=n;return function(){return--e<0}}))}return this},limit:function(n){this._ctx.limit=Math.min(this._ctx.limit,n);e(this._ctx,(function(){var e=n;return function(n,t,r){if(--e<=0)t(r);return e>=0}}),true);return this},until:function(e,t){n(this._ctx,(function(n,r,i){if(e(n.value)){r(i);return t}else{return true}}));return this},first:function(n){return this.limit(1).toArray((function(n){return n[0]})).then(n)},last:function(n){return this.reverse().first(n)},filter:function(e){n(this._ctx,(function(n){return e(n.value)}));t(this._ctx,e);return this},and:function(n){return this.filter(n)},or:function(n){return new xn(this._ctx.table,n,this)},reverse:function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this},desc:function(){return this.reverse()},eachKey:function(n){var e=this._ctx;e.keysOnly=!e.isMatch;return this.each((function(e,t){n(t.key,t)}))},eachUniqueKey:function(n){this._ctx.unique="unique";return this.eachKey(n)},eachPrimaryKey:function(n){var e=this._ctx;e.keysOnly=!e.isMatch;return this.each((function(e,t){n(t.primaryKey,t)}))},keys:function(n){var e=this._ctx;e.keysOnly=!e.isMatch;var t=[];return this.each((function(n,e){t.push(e.key)})).then((function(){return t})).then(n)},primaryKeys:function(n){var e=this._ctx;if(Y&&e.dir==="next"&&On(e,true)&&e.limit>0){return this._read((function(n,t,i){var o=r(e,i);var u=e.limit<Infinity?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);u.onerror=ze(t);u.onsuccess=We(n)})).then(n)}e.keysOnly=!e.isMatch;var t=[];return this.each((function(n,e){t.push(e.primaryKey)})).then((function(){return t})).then(n)},uniqueKeys:function(n){this._ctx.unique="unique";return this.keys(n)},firstKey:function(n){return this.limit(1).keys((function(n){return n[0]})).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};n(this._ctx,(function(n){var e=n.primaryKey.toString();var t=f(r,e);r[e]=true;return!t}));return this},modify:function(n){var e=this,t=this._ctx,r=t.table.hook,o=r.updating.fire,u=r.deleting.fire;return this._write((function(t,r,s,c){var l;if(typeof n==="function"){if(o===un&&u===un){l=n}else{l=function(e){var t=C(e);if(n.call(this,e,this)===false)return false;if(!f(this,"value")){u.call(this,this.primKey,e,c)}else{var r=T(t,this.value);var a=o.call(this,r,this.primKey,t,c);if(a){e=this.value;i(a).forEach((function(n){E(e,n,a[n])}))}}}}}else if(o===un){var h=i(n);var d=h.length;l=function(e){var t=false;for(var r=0;r<d;++r){var i=h[r],o=n[i];if(P(e,i)!==o){E(e,i,o);t=true}}return t}}else{var v=n;n=S(v);l=function(e){var t=false;var r=o.call(this,n,this.primKey,C(e),c);if(r)a(n,r);i(n).forEach((function(r){var i=n[r];if(P(e,r)!==i){E(e,r,i);t=true}}));if(r)n=S(v);return t}}var p=0;var y=0;var g=false;var m=[];var b=[];var w=null;function _(n,e){w=e.primaryKey;var t={primKey:e.primaryKey,value:n,onsuccess:null,onerror:null};function r(n){m.push(n);b.push(t.primKey);x();return true}if(l.call(t,n,t)!==false){var i=!f(t,"value");++p;j((function(){var n=i?e.delete():e.update(t.value);n._hookCtx=t;n.onerror=He(r);n.onsuccess=Ve((function(){++y;x()}))}),r)}else if(t.onsuccess){t.onsuccess(t.value)}}function k(n){if(n){m.push(n);b.push(w)}return r(new X("Error modifying one or more objects",m,y,b))}function x(){if(g&&y+m.length===p){if(m.length>0)k();else t(y)}}e.clone().raw()._iterate(_,(function(){g=true;x()}),k,s)}))},delete:function(){var n=this;var e=this._ctx,t=e.range,r=e.table.hook.deleting.fire,i=r!==un;if(!i&&On(e)&&(e.isPrimKey&&!Me||!t)){return this._write((function(n,e,r){var i=ze(e),o=t?r.count(t):r.count();o.onerror=i;o.onsuccess=function(){var u=o.result;j((function(){var e=t?r.delete(t):r.clear();e.onerror=i;e.onsuccess=function(){return n(u)}}),(function(n){return e(n)}))}}))}var o=i?2e3:1e4;return this._write((function(t,u,a,s){var c=0;var f=n.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(o).raw();var l=[];var h=function(){return f.each(i?function(n,e){l.push([e.primaryKey,e.value])}:function(n,e){l.push(e.primaryKey)}).then((function(){i?l.sort((function(n,e){return Fn(n[0],e[0])})):l.sort(Fn);return _n(a,s,l,i,r)})).then((function(){var n=l.length;c+=n;l=[];return n<o?c:h()}))};t(h())}))}}}));function Sn(n,e){return n._cfg.version-e._cfg.version}function An(n,e,t){e.forEach((function(e){var r=t[e];n.forEach((function(n){if(!(e in n)){if(n===kn.prototype||n instanceof kn){d(n,e,{get:function(){return this.table(e)}})}else{n[e]=new bn(e,r)}}}))}))}function In(n){n.forEach((function(n){for(var e in n){if(n[e]instanceof bn)delete n[e]}}))}function Dn(n,e,t,r,i,o){var u=o?function(n,e,r){return t(o(n),e,r)}:t;var a=oe(u,i);if(!n.onerror)n.onerror=ze(i);if(e){n.onsuccess=x((function t(){var o=n.result;if(o){var u=function(){o.continue()};if(e(o,(function(n){u=n}),r,i))a(o.value,o,(function(n){u=n}));u()}else{r()}}),i)}else{n.onsuccess=x((function e(){var t=n.result;if(t){var i=function(){t.continue()};a(t.value,t,(function(n){i=n}));i()}else{r()}}),i)}}function Cn(n){var e=[];n.split(",").forEach((function(n){n=n.trim();var t=n.replace(/([&*]|\+\+)/g,"");var r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;e.push(new Je(t,r||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),o(r),/\./.test(n)))}));return e}function Tn(n,e){return h.cmp(n,e)}function Kn(n,e){return Tn(n,e)<0?n:e}function Bn(n,e){return Tn(n,e)>0?n:e}function Fn(n,e){return h.cmp(n,e)}function Nn(n,e){return h.cmp(e,n)}function qn(n,e){return n<e?-1:n===e?0:1}function Rn(n,e){return n>e?-1:n===e?0:1}function Ln(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}function Vn(){U.verno=O.version/10;U._dbSchema=p={};g=m(O.objectStoreNames,0);if(g.length===0)return;var n=O.transaction(Xe(g),"readonly");g.forEach((function(e){var t=n.objectStore(e),r=t.keyPath,i=r&&typeof r==="string"&&r.indexOf(".")!==-1;var o=new Je(r,r||"",false,false,!!t.autoIncrement,r&&typeof r!=="string",i);var u=[];for(var a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);r=s.keyPath;i=r&&typeof r==="string"&&r.indexOf(".")!==-1;var c=new Je(s.name,r,!!s.unique,!!s.multiEntry,false,r&&typeof r!=="string",i);u.push(c)}p[e]=new Ye(e,o,u,{})}));An([_],i(p),p)}function zn(n,e){var t=e.db.objectStoreNames;for(var r=0;r<t.length;++r){var i=t[r];var o=e.objectStore(i);Y="getAll"in o;for(var a=0;a<o.indexNames.length;++a){var s=o.indexNames[a];var c=o.index(s).keyPath;var f=typeof c==="string"?c:"["+m(c).join("+")+"]";if(n[i]){var l=n[i].idxByName[f];if(l)l.name=s}}}if(/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){Y=false}}function Wn(n){U.on("blocked").fire(n);Ke.filter((function(n){return n.name===U.name&&n!==U&&!n._vcFired})).map((function(e){return e.on("versionchange").fire(n)}))}a(this,{Collection:En,Table:bn,Transaction:kn,Version:nn,WhereClause:xn});Z();s.forEach((function(n){n(U)}))}function Ue(n){if(typeof n==="function"){return new n}else if(o(n)){return[Ue(n[0])]}else if(n&&typeof n==="object"){var e={};Le(e,n);return e}else{return n}}function Le(n,e){i(e).forEach((function(t){var r=Ue(e[t]);n[t]=r}));return n}function Ve(n){return oe((function(e){var t=e.target,r=t._hookCtx,i=r.value||t.result,o=r&&r.onsuccess;o&&o(i);n&&n(i)}),n)}function ze(n){return oe((function(e){Qe(e);n(e.target.error);return false}))}function We(n){return oe((function(e){n(e.target.result)}))}function He(n){return oe((function(e){var t=e.target,r=t.error,i=t._hookCtx,o=i&&i.onerror;o&&o(r);Qe(e);n(r);return false}))}function Qe(n){if(n.stopPropagation)n.stopPropagation();if(n.preventDefault)n.preventDefault()}function Ge(n){var e=function(e){return n.next(e)},t=function(e){return n.throw(e)},r=u(e),i=u(t);function u(n){return function(e){var t=n(e),u=t.value;return t.done?u:!u||typeof u.then!=="function"?o(u)?Un.all(u).then(r,i):r(u):u.then(r,i)}}return u(e)()}function Je(n,e,t,r,i,o,u){this.name=n;this.keyPath=e;this.unique=t;this.multi=r;this.auto=i;this.compound=o;this.dotted=u;var a=typeof e==="string"?e:e&&"["+[].join.call(e,"+")+"]";this.src=(t?"&":"")+(r?"*":"")+(i?"++":"")+a}function Ye(n,e,t,r){this.name=n;this.primKey=e||new Je;this.indexes=t||[new Je];this.instanceTemplate=r;this.mappedClass=null;this.idxByName=k(t,(function(n){return[n.name,n]}))}function Xe(n){return n.length===1?n[0]:n}function $e(n){var e=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return e&&e.bind(n)}l(Re,on);l(Re,{delete:function(n){var e=new Re(n),t=e.delete();t.onblocked=function(n){e.on("blocked",n);return this};return t},exists:function(n){return new Re(n).open().then((function(n){n.close();return true})).catch(Re.NoSuchDatabaseError,(function(){return false}))},getDatabaseNames:function(n){var e=$e(Re.dependencies.indexedDB);return e?new Un((function(n,t){var r=e();r.onsuccess=function(e){n(m(e.target.result,0))};r.onerror=ze(t)})).then(n):qe.dbnames.toCollection().primaryKeys(n)},defineClass:function(){function n(n){if(n)a(this,n)}return n},applyStructure:Le,ignoreTransaction:function(n){return Mn.trans?we(Mn.transless,n):n()},vip:function(n){return he((function(){Mn.letThrough=true;return n()}))},async:function(n){return function(){try{var e=Ge(n.apply(this,arguments));if(!e||typeof e.then!=="function")return Un.resolve(e);return e}catch(n){return Ee(n)}}},spawn:function(n,e,t){try{var r=Ge(n.apply(t,e||[]));if(!r||typeof r.then!=="function")return Un.resolve(r);return r}catch(n){return Ee(n)}},currentTransaction:{get:function(){return Mn.trans||null}},waitFor:function(n,e){var t=Un.resolve(typeof n==="function"?Re.ignoreTransaction(n):n).timeout(e||6e4);return Mn.trans?Mn.trans.waitFor(t):t},Promise:Un,debug:{get:function(){return N},set:function(n){q(n,n==="dexie"?function(){return true}:Ne)}},derive:v,extend:a,props:l,override:b,Events:Oe,getByKeyPath:P,setByKeyPath:E,delByKeyPath:O,shallowClone:S,deepClone:C,getObjectDiff:T,asap:_,maxKey:Ie,minKey:De,addons:[],connections:Ke,MultiModifyError:en.Modify,errnames:Z,IndexSpec:Je,TableSchema:Ye,dependencies:function(){try{return{indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch(n){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Se,version:Se.split(".").map((function(n){return parseInt(n)})).reduce((function(n,e,t){return n+e/Math.pow(10,t*2)})),default:Re,Dexie:Re});Un.rejectionMapper=rn;qe=new Re("__dbnames");qe.version(1).stores({dbnames:"name"});(function(){var n="Dexie.DatabaseNames";try{if(typeof localStorage!==undefined&&u.document!==undefined){JSON.parse(localStorage.getItem(n)||"[]").forEach((function(n){return qe.dbnames.put({name:n}).catch(un)}));localStorage.removeItem(n)}}catch(n){}})();var Ze=function(){function n(){this.database()}n.prototype.database=function(){this.db=new Re("components");this.db.version(1).stores({tags:"++id, tag",package:"++id, version"})};n.prototype.perform=function(){return __awaiter(this,void 0,void 0,(function(){var n,e,t,r,i;return __generator(this,(function(o){switch(o.label){case 0:n=this;return[4,this.fetchPackage()];case 1:n.package=o.sent();e=this;return[4,this.fetchCollection()];case 2:e.collection=o.sent();t=this;return[4,this.fetchDocumentation()];case 3:t.documentation=o.sent();r=this;return[4,this.fetchCoverage()];case 4:r.coverage=o.sent();i=this;return[4,this.fetchStats()];case 5:i.stats=o.sent();return[2,this]}}))}))};n.prototype.fetchPackage=function(){return __awaiter(this,void 0,void 0,(function(){var n,e,t;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.db.package.orderBy("version").last()];case 1:n=r.sent();return[4,fetch(this.package_link)];case 2:e=r.sent();return[4,e.json()];case 3:t=r.sent();if(!n||n.version!==t.version){this.db.package.put(t);n=t}return[2,n]}}))}))};n.prototype.fetchCollection=function(){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:return[4,fetch(this.collection_link)];case 1:n=e.sent();return[4,n.json()];case 2:return[2,e.sent()]}}))}))};n.prototype.fetchDocumentation=function(){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:return[4,fetch(this.documentation_link)];case 1:n=e.sent();return[4,n.json()];case 2:return[2,e.sent()]}}))}))};n.prototype.fetchCoverage=function(){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:return[4,fetch(this.coverage_link)];case 1:n=e.sent();return[4,n.json()];case 2:return[2,e.sent()]}}))}))};n.prototype.fetchStats=function(){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:return[4,fetch(this.stats_link)];case 1:n=e.sent();return[4,n.json()];case 2:return[2,e.sent()]}}))}))};n.prototype.getUsageCount=function(n){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getAllForTag(n)];case 1:e=t.sent();return[2,e.documentation&&e.documentation.usage&&Object.keys(e.documentation.usage).length||0]}}))}))};Object.defineProperty(n.prototype,"components",{get:function(){return this.documentation.components.map((function(n){return n.tag}))},enumerable:true,configurable:true});n.prototype.getAllForTag=function(n){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i,o;return __generator(this,(function(u){switch(u.label){case 0:e="stellar-"+n;return[4,this.db.tags.where("tag").equals(e).first()];case 1:t=u.sent();if(!t){r={};i=[];o={};r=this.documentation.components.find((function(e){return e.tag===n}));o=this.stats.entries.find((function(e){return e.components.find((function(e){return e.tag===n}))}));i=this.coverage[o.inputs[0]];t={tag:e,documentation:r,coverage:i,stats:o};this.db.tags.put(t)}return[2,t]}}))}))};n.prototype.getVersion=function(){return this.package.version||"0.0.0"};return n}();var nt=function(){var n;var e=function(){return new Ze};return{get:function(){if(!n){n=e()}return n}}}();var et=n("stellar_documentation",function(){function n(n){e(this,n);this.ready=false}n.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:n=nt.get();n.package_link=this.package_link;n.collection_link=this.collection_link;n.documentation_link=this.documentation_link;n.coverage_link=this.coverage_link;n.stats_link=this.stats_link;return[4,n.perform()];case 1:e.sent();this.package=n.package;this.collection=n.collection;this.documentation=n.documentation;this.coverage=n.coverage;this.stats=n.stats;this.loader=n;this.ready=true;return[2]}}))}))};n.prototype.render=function(){var n={ready:this.ready,package:this.package,collection:this.collection,documentation:this.documentation,coverage:this.coverage,loader:this.loader,stats:this.stats};return t(r.Provider,{state:n},t("stencil-router",null,t("stencil-route-switch",{scrollTopOffset:0},t("stencil-route",{url:"/component/:name",component:"stellar-docs-component"}),t("stencil-route",{url:"/:name",component:"stellar-docs-page",exact:true}),t("stencil-route",{url:"/",component:"stellar-docs-home",exact:true}),t("stencil-route",{component:"stellar-docs-not-found"}))))};Object.defineProperty(n,"style",{get:function(){return""},enumerable:true,configurable:true});return n}())}}}));