var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-10910887.system.js"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.r;r=e.h;n=e.g}],execute:function(){var i={iconStyle:"solid",base:{iconColor:"#484849",color:"#484849",fontWeight:500,fontFamily:"Open Sans, sans-serif",fontSize:"15px",fontSmoothing:"antialiased","::placeholder":{color:"#a3a3a4"},":-webkit-autofill":{color:"#a3a3a4"}},invalid:{iconColor:"#f85e5a",color:"#f85e5a","::placeholder":{color:"#fa8e8b"}}};var o={focus:"focused",empty:"empty",invalid:"invalid"};var a=e("stellar_stripe",function(){function e(e){t(this,e);this.token="pk_test_6pRNASCoBOKtIshFeQd4XMUh";this.name="stripe";this.value=undefined;this.cardData={};this.state="preparing"}e.prototype.componentWillLoad=function(){this.stripe=window["Stripe"](this.token)};e.prototype.componentDidLoad=function(){this.connect()};e.prototype.connect=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.stripe=window["Stripe"](this.token);this.input=this.element.querySelector(".token");this.attachToForm();this.prepareStripe();return[2]}))}))};e.prototype.getToken=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.stripe.createToken(this.card,this.cardData).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))];case 1:e.sent();return[2,this.value!==undefined]}}))}))};e.prototype.attachToForm=function(){var e=this;var t=this.element.closest("form");if(t){t.addEventListener("submit",(function(r){r.preventDefault();e.getToken().then((function(e){if(e){t.submit()}}))}))}else{console.error("The stellar-stripe tag must be added to a form.")}};e.prototype.handleResponse=function(e){var t=e.error,r=e.token;if(t){this.setError(t.message)}else{this.error=undefined;this.value=r.id}};e.prototype.handleError=function(e){this.setError(e.message)};e.prototype.setError=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.error=e;return[2]}))}))};e.prototype.prepareStripe=function(){var e=this.stripe.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Open+Sans"}],locale:"auto"});this.card=e.create("card",{style:i,classes:o,hidePostalCode:true});this.card.mount(this.element.querySelector("#card"))};e.prototype.renderPhone=function(){return r("stellar-input",{id:"phone","data-tid":"stellar_stripe.form.phone",type:"tel",placeholder:"(941) 555-0123",required:true,label:"Phone number"})};e.prototype.renderZip=function(){return r("stellar-input",{id:"zip","data-tid":"stellar_stripe.form.postal_code",type:"text",placeholder:"94107",required:true,label:"ZIP"})};e.prototype.render=function(){return r("div",null,r("input",{type:"hidden",class:"token",name:this.name,value:this.value}),r("div",{class:"field"},r("label",{"data-for":"stellar_stripe.form.card"},r("p",{class:"label"},"Card details")),r("div",{"data-tid":"stellar_stripe.form.card",id:"card",class:"input"}),this.error&&r("p",{class:"validation"},r("span",null,this.error))),r("stellar-grid",null,this.renderPhone(),this.renderZip()))};Object.defineProperty(e.prototype,"element",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"stellar-stripe{display:block}stellar-stripe .field{position:relative;margin-bottom:30px;width:100%}stellar-stripe label{display:block;margin-bottom:10px;line-height:1.69;color:#484849;color:var(--gray5);font-size:13px;font-weight:600}stellar-stripe .input{border:1px solid var(--gray2);border-radius:4px}stellar-stripe .input::-webkit-input-placeholder{-webkit-transition:color .3s cubic-bezier(.165,.84,.44,1);transition:color .3s cubic-bezier(.165,.84,.44,1);color:transparent}stellar-stripe .input::-moz-placeholder{-webkit-transition:color .3s cubic-bezier(.165,.84,.44,1);transition:color .3s cubic-bezier(.165,.84,.44,1);color:transparent}stellar-stripe .input:-ms-input-placeholder{-webkit-transition:color .3s cubic-bezier(.165,.84,.44,1);transition:color .3s cubic-bezier(.165,.84,.44,1);color:transparent}stellar-stripe .input.StripeElement{display:-ms-flexbox;display:flex;top:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:20px;height:100%}stellar-stripe .input.StripeElement>div{width:100%}stellar-stripe .input.focused::-webkit-input-placeholder,stellar-stripe .input:not(.empty)::-webkit-input-placeholder{color:var(--gray2)}stellar-stripe .input.focused::-moz-placeholder,stellar-stripe .input:not(.empty)::-moz-placeholder{color:var(--gray2)}stellar-stripe .input.focused:-ms-input-placeholder,stellar-stripe .input:not(.empty):-ms-input-placeholder{color:var(--gray2)}stellar-stripe .input.focused+label,stellar-stripe .input:not(.empty)+label{cursor:default;-webkit-transform:scale(.85) translateY(-25px);transform:scale(.85) translateY(-25px);color:#aab7c4}stellar-stripe .input.focused+label{color:#24b47e}stellar-stripe .input.invalid+label{color:#ffa27b}stellar-stripe .input.focused+label+.baseline{background-color:#24b47e}stellar-stripe .input.focused.invalid+label+.baseline{background-color:#e25950}stellar-stripe .input input{appearance:none;-webkit-appearance:none;outline:none;border-style:none;-moz-appearance:none}stellar-stripe .validation{margin-top:10px;margin-bottom:0;color:var(--red5);font-size:14px;font-weight:500}stellar-stripe .validation span{display:block;padding:10px 0;line-height:1.4}stellar-stripe .validation span+span{border-top:1px solid var(--gray1)}"},enumerable:true,configurable:true});return e}())}}}));